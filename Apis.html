<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <h1>APIs test </h1>
  <!--Linking file to moment.js-->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script type="text/javascript">

    // OMDB API
    var title = "frozen";
    var apiKey = "997c2c9f";
    var queryURL = "https://www.omdbapi.com/?t=" + title + "&plot=full&apikey=" + apiKey;

    $.ajax({
      url: queryURL,
      method: "GET"
    }).then(function (OMDBresponse) {

      console.log(OMDBresponse);
      var movieId = OMDBresponse.imdbID;

      // // Cineinfo API
      // const settings = {
      //   "async": true,
      //   "crossDomain": true,
      //   "url": "https://cineinfo.p.rapidapi.com/v1/movies/tt2294629?id_type=imdb_id",
      //   "method": "GET",
      //   "headers": {
      //     "x-rapidapi-key": "f1b3cbe9c3msh648456feaa198ebp1d2da3jsnc55cec980b8a",
      //     "x-rapidapi-host": "cineinfo.p.rapidapi.com"
      //   }
      // };

      // $.ajax(settings).done(function (response) {
      //   console.log(response);
      // });

      // IMDB API articles
      var articlesUrl = {
        "async": true,
        "crossDomain": true,
        "url": "https://imdb8.p.rapidapi.com/title/get-news?tconst=" + movieId + "&limit=10",
        "method": "GET",
        "headers": {
          "x-rapidapi-key": "f1b3cbe9c3msh648456feaa198ebp1d2da3jsnc55cec980b8a",
          "x-rapidapi-host": "imdb8.p.rapidapi.com"
        }
      };

      $.ajax(articlesUrl).done(function (response) {
        console.log(response);
      });


    });


    // Amazon API
    //https://rapidapi.com/logicbuilder/api/amazon-product-reviews-keywords
    var keyword1 = "spider man";
    var keyword = keyword1.replace(/ /g, '%20')
    // US: 'www.amazon.com',
    // AU: 'www.amazon.com.au',
    // BR: 'www.amazon.com.br',
    // CA: 'www.amazon.ca',
    // CN: 'www.amazon.cn',
    // FR: 'www.amazon.fr',
    // DE: 'www.amazon.de',
    // IN: 'www.amazon.in',
    // IT: 'www.amazon.it',
    // MX: 'www.amazon.com.mx',
    // NL: 'www.amazon.nl',
    // SG: 'www.amazon.sg',
    // ES: 'www.amazon.es',
    // TR: 'www.amazon.com.tr',
    // AE: 'www.amazon.ae',
    // GB: 'www.amazon.co.uk',
    // JP: 'www.amazon.jp',
    var country = "GB"
    var settings = {
      "async": true,
      "crossDomain": true,
      "url": "https://amazon-product-reviews-keywords.p.rapidapi.com/product/search?keyword=" + keyword + "&country=" + country,
      "method": "GET",
      "headers": {
        "x-rapidapi-key": "f1b3cbe9c3msh648456feaa198ebp1d2da3jsnc55cec980b8a",
        "x-rapidapi-host": "amazon-product-reviews-keywords.p.rapidapi.com"
      }
    };

    $.ajax(settings).done(function (response) {
      console.log(response);
    });

    // IMDB API search by genre
    var genre = "adventure";
    var settings = {
      "async": true,
      "crossDomain": true,
      "url": "https://imdb8.p.rapidapi.com/title/get-popular-movies-by-genre?genre=%2Fchart%2Fpopular%2Fgenre%2F" + genre,
      "method": "GET",
      "headers": {
        "x-rapidapi-key": "f1b3cbe9c3msh648456feaa198ebp1d2da3jsnc55cec980b8a",
        "x-rapidapi-host": "imdb8.p.rapidapi.com"
      }
    };

    $.ajax(settings).done(function (response) {
      console.log(response);
    });

    // born today actors
    var month = moment().month() + 1;
    var day = moment().get('D');
    var bornTodayUrl = {
      "async": true,
      "crossDomain": true,
      "url": "https://imdb8.p.rapidapi.com/actors/list-born-today?month=" + month + "&day=" + day,
      "method": "GET",
      "headers": {
        "x-rapidapi-key": "f1b3cbe9c3msh648456feaa198ebp1d2da3jsnc55cec980b8a",
        "x-rapidapi-host": "imdb8.p.rapidapi.com"
      }
    };

    $.ajax(bornTodayUrl).done(function (bornTodayResponse) {
      console.log(bornTodayResponse);

      for (var i = 0; i < bornTodayResponse.length; i++) {
        var actorId = bornTodayResponse[i].slice(6, 15);

        // Actors bio by IMBD ID
        var actorBioUrl = {
          "async": true,
          "crossDomain": true,
          "url": "https://imdb8.p.rapidapi.com/actors/get-bio?nconst=" + actorId,
          "method": "GET",
          "headers": {
            "x-rapidapi-key": "f1b3cbe9c3msh648456feaa198ebp1d2da3jsnc55cec980b8a",
            "x-rapidapi-host": "imdb8.p.rapidapi.com"
          }
        };

        $.ajax(actorBioUrl).done(function (response) {
          console.log(response);
        });
      };

    });

    // search for Ids + images
    var name = "Will Smith";
    var name1 = name.replace(/ /g, '%20');
    var imdbIdUrl = {
      "async": true,
      "crossDomain": true,
      "url": "https://imdb-internet-movie-database-unofficial.p.rapidapi.com/search/" + name1,
      "method": "GET",
      "headers": {
        "x-rapidapi-key": "f1b3cbe9c3msh648456feaa198ebp1d2da3jsnc55cec980b8a",
        "x-rapidapi-host": "imdb-internet-movie-database-unofficial.p.rapidapi.com"
      }
    };

    $.ajax(imdbIdUrl).done(function (response) {
      console.log(response);
    });

  </script>
  <!--Linking file to JQuery-->
</body>

</html>